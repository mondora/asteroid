!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.Asteroid=e():t.Asteroid=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),u=o(i),c=n(14),s=r(c),a=n(16),f=r(a),l=n(21),p=r(l),d=n(24),h=r(d);e["default"]=u["default"].mixin(s).mixin(f).mixin(p).mixin(h),t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t,e,n){for(var r=!0;r;){var o=t,i=e,u=n;c=a=s=void 0,r=!1,null===o&&(o=Function.prototype);var c=Object.getOwnPropertyDescriptor(o,i);if(void 0!==c){if("value"in c)return c.value;var s=c.get;return void 0===s?void 0:s.call(u)}var a=Object.getPrototypeOf(o);if(null===a)return void 0;t=a,e=i,n=u,r=!0}},s=n(2),a=r(s),f=n(13),l=r(f),p=function(t){function e(){o(this,e),c(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return i(e,t),u(e,null,[{key:"mixin",value:function(t){var e=function(e){function n(e){o(this,n),c(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),t.init&&t.init.call(this,e)}return i(n,e),n}(this);return a["default"](e.prototype,t),delete e.prototype.init,e}}]),e}(l["default"]);e["default"]=p,t.exports=e["default"]},function(t,e,n){function r(t,e,n){for(var r=-1,o=u(e),i=o.length;++r<i;){var c=o[r],s=t[c],a=n(s,e[c],c,t,e);(a===a?a===s:s!==s)&&(void 0!==s||c in t)||(t[c]=a)}return t}var o=n(3),i=n(9),u=n(5),c=i(function(t,e,n){return n?r(t,e,n):o(t,e)});t.exports=c},function(t,e,n){function r(t,e){return null==e?t:o(e,i(e),t)}var o=n(4),i=n(5);t.exports=r},function(t,e){function n(t,e,n){n||(n={});for(var r=-1,o=e.length;++r<o;){var i=e[r];n[i]=t[i]}return n}t.exports=n},function(t,e,n){function r(t){return function(e){return null==e?void 0:e[t]}}function o(t){return null!=t&&u(g(t))}function i(t,e){return t="number"==typeof t||d.test(t)?+t:-1,e=null==e?m:e,t>-1&&t%1==0&&e>t}function u(t){return"number"==typeof t&&t>-1&&t%1==0&&m>=t}function c(t){for(var e=a(t),n=e.length,r=n&&t.length,o=!!r&&u(r)&&(p(t)||l(t)),c=-1,s=[];++c<n;){var f=e[c];(o&&i(f,r)||v.call(t,f))&&s.push(f)}return s}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){if(null==t)return[];s(t)||(t=Object(t));var e=t.length;e=e&&u(e)&&(p(t)||l(t))&&e||0;for(var n=t.constructor,r=-1,o="function"==typeof n&&n.prototype===t,c=Array(e),a=e>0;++r<e;)c[r]=r+"";for(var f in t)a&&i(f,e)||"constructor"==f&&(o||!v.call(t,f))||c.push(f);return c}var f=n(6),l=n(7),p=n(8),d=/^\d+$/,h=Object.prototype,v=h.hasOwnProperty,y=f(Object,"keys"),m=9007199254740991,g=r("length"),b=y?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&o(t)?c(t):s(t)?y(t):[]}:c;t.exports=b},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return u(n)?n:void 0}function o(t){return i(t)&&p.call(t)==c}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){return null==t?!1:o(t)?d.test(f.call(t)):n(t)&&s.test(t)}var c="[object Function]",s=/^\[object .+?Constructor\]$/,a=Object.prototype,f=Function.prototype.toString,l=a.hasOwnProperty,p=a.toString,d=RegExp("^"+f.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t){return function(e){return null==e?void 0:e[t]}}function o(t){return null!=t&&i(l(t))}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&f>=t}function u(t){return n(t)&&o(t)&&s.call(t,"callee")&&!a.call(t,"callee")}var c=Object.prototype,s=c.hasOwnProperty,a=c.propertyIsEnumerable,f=9007199254740991,l=r("length");t.exports=u},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return c(n)?n:void 0}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&m>=t}function i(t){return u(t)&&h.call(t)==a}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){return null==t?!1:i(t)?v.test(p.call(t)):n(t)&&f.test(t)}var s="[object Array]",a="[object Function]",f=/^\[object .+?Constructor\]$/,l=Object.prototype,p=Function.prototype.toString,d=l.hasOwnProperty,h=l.toString,v=RegExp("^"+p.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y=r(Array,"isArray"),m=9007199254740991,g=y||function(t){return n(t)&&o(t.length)&&h.call(t)==s};t.exports=g},function(t,e,n){function r(t){return u(function(e,n){var r=-1,u=null==e?0:n.length,c=u>2?n[u-2]:void 0,s=u>2?n[2]:void 0,a=u>1?n[u-1]:void 0;for("function"==typeof c?(c=o(c,a,5),u-=2):(c="function"==typeof a?a:void 0,u-=c?1:0),s&&i(n[0],n[1],s)&&(c=3>u?void 0:c,u=1);++r<u;){var f=n[r];f&&t(e,f,c)}return e})}var o=n(10),i=n(11),u=n(12);t.exports=r},function(t,e){function n(t,e,n){if("function"!=typeof t)return r;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)};case 5:return function(n,r,o,i,u){return t.call(e,n,r,o,i,u)}}return function(){return t.apply(e,arguments)}}function r(t){return t}t.exports=n},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&u(f(t))}function o(t,e){return t="number"==typeof t||s.test(t)?+t:-1,e=null==e?a:e,t>-1&&t%1==0&&e>t}function i(t,e,n){if(!c(n))return!1;var i=typeof e;if("number"==i?r(n)&&o(e,n.length):"string"==i&&e in n){var u=n[e];return t===t?t===u:u!==u}return!1}function u(t){return"number"==typeof t&&t>-1&&t%1==0&&a>=t}function c(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var s=/^\d+$/,a=9007199254740991,f=n("length");t.exports=i},function(t,e){function n(t,e){if("function"!=typeof t)throw new TypeError(r);return e=o(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=o(n.length-e,0),u=Array(i);++r<i;)u[r]=n[e+r];switch(e){case 0:return t.call(this,u);case 1:return t.call(this,n[0],u);case 2:return t.call(this,n[0],n[1],u)}var c=Array(e+1);for(r=-1;++r<e;)c[r]=n[r];return c[e]=u,t.apply(this,c)}}var r="Expected a function",o=Math.max;t.exports=n},function(t,e,n){var r;(function(){"use strict";function e(){}function o(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var u=e.prototype,c=this,s=c.EventEmitter;u.getListeners=function(t){var e,n,r=this._getEvents();if(t instanceof RegExp){e={};for(n in r)r.hasOwnProperty(n)&&t.test(n)&&(e[n]=r[n])}else e=r[t]||(r[t]=[]);return e},u.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},u.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},u.addListener=function(t,e){var n,r=this.getListenersAsObject(t),i="object"==typeof e;for(n in r)r.hasOwnProperty(n)&&-1===o(r[n],e)&&r[n].push(i?e:{listener:e,once:!1});return this},u.on=i("addListener"),u.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},u.once=i("addOnceListener"),u.defineEvent=function(t){return this.getListeners(t),this},u.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},u.removeListener=function(t,e){var n,r,i=this.getListenersAsObject(t);for(r in i)i.hasOwnProperty(r)&&(n=o(i[r],e),-1!==n&&i[r].splice(n,1));return this},u.off=i("removeListener"),u.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},u.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},u.manipulateListeners=function(t,e,n){var r,o,i=t?this.removeListener:this.addListener,u=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=n.length;r--;)i.call(this,e,n[r]);else for(r in e)e.hasOwnProperty(r)&&(o=e[r])&&("function"==typeof o?i.call(this,r,o):u.call(this,r,o));return this},u.removeEvent=function(t){var e,n=typeof t,r=this._getEvents();if("string"===n)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},u.removeAllListeners=i("removeEvent"),u.emitEvent=function(t,e){var n,r,o,i,u=this.getListenersAsObject(t);for(o in u)if(u.hasOwnProperty(o))for(r=u[o].length;r--;)n=u[o][r],n.once===!0&&this.removeListener(t,n.listener),i=n.listener.apply(this,e||[]),i===this._getOnceReturnValue()&&this.removeListener(t,n.listener);return this},u.trigger=i("emitEvent"),u.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},u.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},u._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},u._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return c.EventEmitter=s,e},r=function(){return e}.call(c,n,c,t),!(void 0!==r&&(t.exports=r))}).call(this)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){var e=this,n=t.endpoint,r=t.SocketConstructor;this.endpoint=n,this.status="disconnected";var o={endpoint:n,SocketConstructor:r||WebSocket};this.ddp=new u["default"](o).on("connected",function(){e.status="connected",e.emit("connected")}).on("disconnected",function(){e.status="disconnected",e.emit("disconnected")})}Object.defineProperty(e,"__esModule",{value:!0}),e.init=o;var i=n(15),u=r(i)},function(t,e,n){!function(e,r){t.exports=r(n(13))}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t,e,n){for(var r=!0;r;){var o=t,i=e,u=n;c=a=s=void 0,r=!1,null===o&&(o=Function.prototype);var c=Object.getOwnPropertyDescriptor(o,i);if(void 0!==c){if("value"in c)return c.value;var s=c.get;return void 0===s?void 0:s.call(u)}var a=Object.getPrototypeOf(o);if(null===a)return void 0;t=a,e=i,n=u,r=!0}},s=n(1),a=r(s),f=n(2),l=r(f),p=n(3),d=r(p),h=n(4),v="1",y=["ready","nosub","added","changed","removed","result","updated","error"],m=1e4,g=function(t){function e(t){var n=this;o(this,e),c(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.status="disconnected",this.messageQueue=new l["default"](function(t){return"connected"===n.status?(n.socket.send(t),!0):!1}),this.socket=new d["default"](t.SocketConstructor,t.endpoint),this.socket.on("open",function(){n.socket.send({msg:"connect",version:v,support:[v]})}),this.socket.on("close",function(){n.status="disconnected",n.messageQueue.empty(),n.emit("disconnected"),setTimeout(n.socket.connect.bind(n.socket),m)}),this.socket.on("message:in",function(t){"connected"===t.msg?(n.status="connected",n.messageQueue.process(),n.emit("connected")):"ping"===t.msg?n.socket.send({msg:"pong",id:t.id}):h.contains(y,t.msg)&&n.emit(t.msg,t)}),this.socket.connect()}return i(e,t),u(e,[{key:"emit",value:function(){var t=this,n=arguments;setTimeout(function(){c(Object.getPrototypeOf(e.prototype),"emit",t).apply(t,n)},0)}}]),u(e,[{key:"method",value:function(t,e){var n=h.uniqueId();return this.messageQueue.push({msg:"method",id:n,method:t,params:e}),n}},{key:"sub",value:function(t,e){var n=h.uniqueId();return this.messageQueue.push({msg:"sub",id:n,name:t,params:e}),n}},{key:"unsub",value:function(t){return this.messageQueue.push({msg:"unsub",id:t}),t}}]),e}(a["default"]);e["default"]=g,t.exports=e["default"]},function(e,n){e.exports=t},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){n(this,t),this.consumer=e,this.queue=[]}return r(t,[{key:"push",value:function(t){this.queue.push(t),this.process()}},{key:"process",value:function(){var t=this;setTimeout(function(){if(0!==t.queue.length){var e=t.consumer(t.queue[0]);e&&(t.queue.shift(),t.process())}},0)}},{key:"empty",value:function(){this.queue=[]}}]),t}();e["default"]=o,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t,e,n){for(var r=!0;r;){var o=t,i=e,u=n;c=a=s=void 0,r=!1,null===o&&(o=Function.prototype);var c=Object.getOwnPropertyDescriptor(o,i);if(void 0!==c){if("value"in c)return c.value;var s=c.get;return void 0===s?void 0:s.call(u)}var a=Object.getPrototypeOf(o);if(null===a)return void 0;t=a,e=i,n=u,r=!0}},s=n(1),a=r(s),f=function(t){function e(t,n){o(this,e),c(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.SocketConstructor=t,this.endpoint=n}return i(e,t),u(e,[{key:"emit",value:function(){var t=this,n=arguments;setTimeout(function(){c(Object.getPrototypeOf(e.prototype),"emit",t).apply(t,n)},0)}}]),u(e,[{key:"send",value:function(t){var e=JSON.stringify(t);this.rawSocket.send(e),this.emit("message:out",JSON.parse(e))}},{key:"connect",value:function(){var t=this;this.rawSocket=new this.SocketConstructor(this.endpoint),this.rawSocket.onopen=function(){return t.emit("open")},this.rawSocket.onerror=function(e){return t.emit("error",e)},this.rawSocket.onclose=function(){return t.emit("close")},this.rawSocket.onmessage=function(e){var n;try{n=JSON.parse(e.data)}catch(r){return}t.emit("message:in",n)}}}]),e}(a["default"]);e["default"]=f,t.exports=e["default"]},function(t,e){"use strict";function n(){return(o++).toString()}function r(t,e){return-1!==t.indexOf(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueId=n,e.contains=r;var o=0}])})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(){var t=this;this._methodsCache={},this.ddp.on("result",function(e){var n=t._methodsCache[e.id];e.error?n.reject(e.error):n.resolve(e.result),delete t._methodsCache[e.id]})}function i(t,e){var n=this;return new s["default"](function(r,o){var i=n.ddp.method(t,e);n._methodsCache[i]={resolve:r,reject:o}})}function u(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];return this.apply(t,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.init=o,e.apply=i,e.call=u;var c=n(17),s=r(c)},function(t,e,n){(function(t,e,n){!function(){function r(n){t.setImmediate?e(n):t.importScripts?setTimeout(n):(i++,u[i]=n,t.postMessage(i,"*"))}function o(t){"use strict";function e(t,e,n,r){if("object"!=typeof a&&"function"!=typeof a||"function"!=typeof t)r();else try{var o=0;t.call(a,function(t){o++||(a=t,e())},function(t){o++||(a=t,n())})}catch(i){a=i,n()}}function n(){var t;try{t=a&&a.then}catch(r){return a=r,s=2,n()}e(t,function(){s=1,n()},function(){s=2,n()},function(){try{1==s&&"function"==typeof i?a=i(a):2==s&&"function"==typeof u&&(a=u(a),s=1)}catch(n){return a=n,l()}a==c?(a=TypeError(),l()):e(t,function(){l(3)},l,function(){l(1==s&&3)})})}if("function"!=typeof t&&void 0!=t)throw TypeError();if("object"!=typeof this||this&&this.then)throw TypeError();var i,u,c=this,s=0,a=0,f=[];c.promise=c,c.resolve=function(t){return i=c.fn,u=c.er,s||(a=t,s=1,r(n)),c},c.reject=function(t){return i=c.fn,u=c.er,s||(a=t,s=2,r(n)),c},c._d=1,c.then=function(t,e){if(1!=this._d)throw TypeError();var n=new o;return n.fn=t,n.er=e,3==s?n.resolve(a):4==s?n.reject(a):f.push(n),n},c["catch"]=function(t){return c.then(null,t)};var l=function(t){s=t||4,f.map(function(t){3==s&&t.resolve(a)||t.reject(a)})};try{"function"==typeof t&&t(c.resolve,c.reject)}catch(p){c.reject(p)}return c}t=this;var i=1,u={},c=!1;t.setImmediate||t.addEventListener("message",function(e){if(e.source==t)if(c)r(u[e.data]);else{c=!0;try{u[e.data]()}catch(e){}delete u[e.data],c=!1}}),o.resolve=function(t){if(1!=this._d)throw TypeError();return t instanceof o?t:new o(function(e){e(t)})},o.reject=function(t){if(1!=this._d)throw TypeError();return new o(function(e,n){n(t)})},o.all=function(t){function e(r,o){if(o)return n.resolve(o);if(r)return n.reject(r);var i=t.reduce(function(t,e){return e&&e.then?t+1:t},0);0==i&&n.resolve(t),t.map(function(n,r){n&&n.then&&n.then(function(n){return t[r]=n,e(),n},e)})}if(1!=this._d)throw TypeError();if(!(t instanceof Array))return o.reject(TypeError());var n=new o;return e(),n},o.race=function(t){function e(r,o){if(o)return n.resolve(o);if(r)return n.reject(r);var i=t.reduce(function(t,e){return e&&e.then?t+1:t},0);0==i&&n.resolve(t),t.map(function(t,n){t&&t.then&&t.then(function(t){e(null,t)},e)})}if(1!=this._d)throw TypeError();if(!(t instanceof Array))return o.reject(TypeError());if(0==t.length)return new o;var n=new o;return e(),n},o._d=1,n.exports=o}()}).call(e,function(){return this}(),n(18).setImmediate,n(20)(t))},function(t,e,n){(function(t,r){function o(t,e){this._id=t,this._clearFn=e}var i=n(19).nextTick,u=Function.prototype.apply,c=Array.prototype.slice,s={},a=0;e.setTimeout=function(){return new o(u.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new o(u.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=a++,r=arguments.length<2?!1:c.call(arguments,1);return s[n]=!0,i(function(){s[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete s[t]}}).call(e,n(18).setImmediate,n(18).clearImmediate)},function(t,e){function n(){a=!1,u.length?s=u.concat(s):f=-1,s.length&&r()}function r(){if(!a){var t=setTimeout(n);a=!0;for(var e=s.length;e;){for(u=s,s=[];++f<e;)u[f].run();f=-1,e=s.length}u=null,a=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function i(){}var u,c=t.exports={},s=[],a=!1,f=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new o(t,e)),1!==s.length||a||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=i,c.addListener=i,c.once=i,c.off=i,c.removeListener=i,c.removeAllListeners=i,c.emit=i,c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(){var t=this;this._subscriptionsCache.forEach(function(e){e.stillInQueue||(t._subscriptionsCache.del(e.id),t.subscribe.apply(t,[e.name].concat(o(e.params))))})}function u(){var t=this;this._subscriptionsCache=new h["default"],this.ddp.on("ready",function(e){e.subs.forEach(function(e){t._subscriptionsCache.get(e).emit("ready")})}).on("nosub",function(e){e.error&&t._subscriptionsCache.get(e.id).emit("error",e.error),t._subscriptionsCache.del(e.id)}).on("connected",i.bind(this))}function c(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];var o=y["default"](t,n),i=this._subscriptionsCache.get(o);if(!i){var u=this.ddp.sub(t,n),c="connected"!==this.ddp.status;i=f["default"](new p["default"],{fingerprint:o,id:u,name:t,params:n,stillInQueue:c}),this._subscriptionsCache.add(i)}return i}function s(t){this.ddp.unsub(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.init=u,e.subscribe=c,e.unsubscribe=s;var a=n(2),f=r(a),l=n(13),p=r(l),d=n(22),h=r(d),v=n(23),y=r(v)},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){n(this,t),this.byFingerprint={},this.byId={}}return r(t,[{key:"add",value:function(t){this.byFingerprint[t.fingerprint]=t,this.byId[t.id]=t}},{key:"get",value:function(t){return this.byId[t]||this.byFingerprint[t]||null}},{key:"del",value:function(t){var e=this.get(t)||{};delete this.byFingerprint[e.fingerprint],delete this.byId[e.id]}},{key:"forEach",value:function(t){var e=this;Object.keys(this.byId).forEach(function(n){t(e.byId[n])})}}]),t}();e["default"]=o,t.exports=e["default"]},function(t,e){"use strict";function n(t,e){return JSON.stringify({name:t,params:e})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){var e=this;return this.userId=t.id,this.loggedIn=!0,p.set(this.endpoint+"__login_token__",t.token).then(function(){e.emit("loggedIn")})}function i(){var t=this;return this.userId=null,this.loggedIn=!1,p.del(this.endpoint+"__login_token__").then(function(){t.emit("loggedOut")})}function u(){var t=this;return p.get(this.endpoint+"__login_token__").then(function(t){if(!t)throw"No login token";return{resume:t}}).then(function(e){return t.call("login",e)}).then(o.bind(this))["catch"](i.bind(this))}function c(){this.userId=null,this.loggedIn=!1,this.ddp.on("connected",u.bind(this))}function s(t){return this.call("createUser",t).then(o(this))}function a(t){var e=t.email,n=t.password,r=t.username,i={password:n,user:{username:r,email:e}};return this.call("login",i).then(o(this))}function f(){return this.call("logout").then(i(this))}Object.defineProperty(e,"__esModule",{value:!0}),e.init=c,e.createUser=s,e.login=a,e.logout=f;var l=n(25),p=r(l)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){return new s["default"](function(e){"undefined"!=typeof chrome&&chrome.storage?chrome.storage.local.get(t,function(n){e(n[t])}):e("undefined"!=typeof localStorage?localStorage[t]:a[t])})}function i(t,e){return new s["default"](function(n){if("undefined"!=typeof chrome&&chrome.storage){var r={};r[t]=e,chrome.storage.local.set(r,n)}else"undefined"!=typeof localStorage?(localStorage[t]=e,n()):(a[t]=e,n())})}function u(t){return new s["default"](function(e){"undefined"!=typeof chrome&&chrome.storage?chrome.storage.local.remove(t,e):"undefined"!=typeof localStorage?(delete localStorage[t],e()):(delete a[t],e())})}Object.defineProperty(e,"__esModule",{value:!0}),e.get=o,e.set=i,e.del=u;var c=n(17),s=r(c),a={}}])});